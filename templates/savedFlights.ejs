<!DOCTYPE html>
<html lang="en">

<head>
    <title>Saved Flights - Watchlist</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <header>
        <h1>My Flight Watchlist</h1>
    </header>

    <main>
        <% if (typeof message !== 'undefined' && message) { %>
		<div>
            <%= message %>
        </div>
        <% } %>

		<p>Track and manage your saved flights. Add notes and set priorities to stay organized.</p>
		<a href="/saved/add">+ Add Flight Manually</a>

        <% if (flights && flights.length > 0) { %>
		<ul>
			<% flights.forEach(function(f) { %>
			<li>
				<p><%= f.callsign || 'Unknown' %> — <%= f.airline || 'Unknown Airline' %> — <%= f.status || 'Unknown' %></p>
				<p><%= f.departureIata || '???' %> <%= f.departureAirport || 'Unknown' %> → <%= f.arrivalIata || '???' %> <%= f.arrivalAirport || 'Unknown' %></p>
				<% if (f.notes) { %><p><%= f.notes %></p><% } %>
				<p><span><%= f.priority.charAt(0).toUpperCase() + f.priority.slice(1) %> Priority</span> — <span>Saved <%= new Date(f.savedAt).toLocaleDateString() %></span></p>
				<p>
					<% if (f.callsign) { %><a href="/flight/details?callsign=<%= f.callsign %>">View Details</a><% } %>
					<form action="/saved/delete/<%= f._id %>" method="POST">
						<button type="submit" onclick="return confirm('Delete this flight?')">Delete</button>
					</form>
				</p>
			</li>
			<% }); %>
		</ul>
        <% } else { %>
		<p>No saved flights yet</p>
		<p>Start tracking flights by searching for them and clicking "Save Flight"</p>
		<a href="/airportQuery">Search Flights</a>
        <% } %>
    </main>

    <footer>
        <a href="/">Home</a> | <a href="/airportQuery">Search Flights</a>
    </footer>
</body>

</html>
